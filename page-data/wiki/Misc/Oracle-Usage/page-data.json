{"componentChunkName":"component---src-templates-wiki-template-tsx","path":"/wiki/Misc/Oracle-Usage","result":{"data":{"markdownRemark":{"id":"656eed10-24c7-5af2-92c4-1339ef498a16","frontmatter":{"title":"Oracle Usage","root":null},"html":"<h1 id=\"install-oracle-instantclient\" style=\"position:relative;\"><a href=\"#install-oracle-instantclient\" aria-label=\"install oracle instantclient permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install oracle InstantClient</h1>\n<p>InstantClient 10 is recommneded to allow you to talk with 8,9,10,&#x26;11 server versions.</p>\n<p>Go to <a href=\"http://www.oracle.com/technology/software/tech/oci/instantclient/index.html\">http://www.oracle.com/technology/software/tech/oci/instantclient/index.html</a></p>\n<p>Grab these:</p>\n<ul>\n<li>Instant Client Package - Basic</li>\n<li>Instant Client Package - SDK (devel)</li>\n<li>Instant Client Package - SQL*Plus (not needed for Metasploit but useful to have)</li>\n</ul>\n<p>unzip into /opt/oracle</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sh line-numbers\"><code class=\"language-sh\">cd /opt/oracle\nunzip /opt/oracle/oracle-instantclient-basic-10.2.0.4-1.i386.zip\nunzip /opt/oracle/oracle-instantclient-sqlplus-10.2.0.4-1.i386.zip\nunzip /opt/oracle/oracle-instantclient-devel-10.2.0.4-1.i386.zip</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now set up a symlink so the gem installation can find the right lib:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sh line-numbers\"><code class=\"language-sh\">ln -s libclntsh.so.10.1 libclntsh.so</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1 id=\"set-up-your-environment\" style=\"position:relative;\"><a href=\"#set-up-your-environment\" aria-label=\"set up your environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set up your environment</h1>\n<p>You can either create .sh file to make the appropriate changes when you need it or just add it to your .bashrc</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sh line-numbers\"><code class=\"language-sh\">export PATH=$PATH:/opt/oracle/instantclient_10_2\nexport SQLPATH=/opt/oracle/instantclient_10_2\nexport TNS_ADMIN=/opt/oracle/instantclient_10_2\nexport LD_LIBRARY_PATH=/opt/oracle/instantclient_10_2\nexport ORACLE_HOME=/opt/oracle/instantclient_10_2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id=\"additional-steps-for-kali-linux\" style=\"position:relative;\"><a href=\"#additional-steps-for-kali-linux\" aria-label=\"additional steps for kali linux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional steps for Kali Linux</h1>\n<p>If you are using Kali Linux, you need to perform a couple of additional steps before the Oracle client gem will build properly. First, set your path to prefer the correct version of ruby so that Metasploit can use it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">root@kali:~/ruby-oci8-ruby-oci8-2.1.8# export PATH=/opt/metasploit/ruby/bin:$PATH</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Next, install libgmp (needed to build the gem):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">root@kali:~/ruby-oci8-ruby-oci8-2.1.8# apt-get install libgmp-dev\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nSuggested packages:\n  libgmp10-doc libmpfr-dev\nThe following NEW packages will be installed:\n  libgmp-dev\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 0 B/610 kB of archives.\nAfter this operation, 1,740 kB of additional disk space will be used.\nSelecting previously unselected package libgmp-dev:amd64.\n(Reading database ... 322643 files and directories currently installed.)\nUnpacking libgmp-dev:amd64 (from .../libgmp-dev_2%3a5.0.5+dfsg-2_amd64.deb) ...\nSetting up libgmp-dev:amd64 (2:5.0.5+dfsg-2) ...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id=\"install-the-gem\" style=\"position:relative;\"><a href=\"#install-the-gem\" aria-label=\"install the gem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install the gem</h1>\n<p>Back in your Metasploit directory, copy <code class=\"language-text\">Gemfile.local.example</code> to <code class=\"language-text\">Gemfile.local</code>, then add the following line to the <code class=\"language-text\">:local</code> group</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  gem <span class=\"token string\">'ruby-oci8'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Update gems:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sh line-numbers\"><code class=\"language-sh\">bundle --gemfile Gemfile.local</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>"}},"pageContext":{"id":"656eed10-24c7-5af2-92c4-1339ef498a16"}}}