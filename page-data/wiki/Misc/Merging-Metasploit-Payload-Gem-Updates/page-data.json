{"componentChunkName":"component---src-templates-wiki-template-tsx","path":"/wiki/Misc/Merging-Metasploit-Payload-Gem-Updates","result":{"data":{"markdownRemark":{"id":"91660191-6738-5323-82a9-f7f7c198f696","frontmatter":{"title":"Merging Metasploit Payload Gem Updates","root":null},"html":"<p>When the Metasploit Payloads has a new merge appear in <code class=\"language-text\">master</code>, a new Ruby gem is built and automatically pushed up to <a href=\"https://rubygems.org/gems/metasploit-payloads/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RubyGems</a>. This new version needs to be merged into the Metasploit Framework repository for those changes to be included.</p>\n<p>To do this, committers must:</p>\n<ul>\n<li>Create a new branch in the Metasploit Framework repository.</li>\n<li>Name it something useful like <code class=\"language-text\">metasploit-payloads-&lt;version&gt;</code>.</li>\n<li>Modify <code class=\"language-text\">metasploit-framework.gemspec</code>, so that the new version number is specified for the <code class=\"language-text\">metasploit-payloads</code> gem.</li>\n<li>Run <code class=\"language-text\">bundle install</code>.</li>\n<li>Remove any test/development binaries from <code class=\"language-text\">data/meterpreter</code>.</li>\n<li>Run <code class=\"language-text\">tools/modules/update_payload_cached_sizes.rb</code>.</li>\n<li>Make sure that <code class=\"language-text\">Gemfile.lock</code> only contains changes that are related to Metasploit Payloads.</li>\n<li>\n<p>Stage the following for commit in <code class=\"language-text\">git</code>:</p>\n<ul>\n<li><code class=\"language-text\">Gemfile.lock</code></li>\n<li><code class=\"language-text\">metasploit-framework.gemspec</code></li>\n<li>Any payload modules that have had an updated payload size (usually this includes stageless payloads only)</li>\n</ul>\n</li>\n<li>Commit the staged files.</li>\n<li>Push the branch to github.</li>\n<li>Create the Pull Request.</li>\n</ul>\n<p>Done!</p>\n<p>A sample update PR/commit can be found here: <a href=\"https://github.com/rapid7/metasploit-framework/pull/7666/files\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/rapid7/metasploit-framework/pull/7666/files</a></p>"}},"pageContext":{"id":"91660191-6738-5323-82a9-f7f7c198f696"}}}