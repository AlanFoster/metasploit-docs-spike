{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/auxiliary/gather/kerberos_enumusers","result":{"data":{"moduleMetadataJson":{"id":"95aa5025-ddf6-5b98-94a4-06a1b676ac17","name":"Kerberos Domain User Enumeration","fullname":"auxiliary/gather/kerberos_enumusers","description":"This module will enumerate valid Domain Users via Kerberos from an unauthenticated perspective. It utilizes\n        the different responses returned by the service for valid and invalid users.","rank":300,"fields":{"detailsSlug":"/modules/details/auxiliary/gather/kerberos_enumusers","documentationSlug":"/modules/documentation/auxiliary/gather/kerberos_enumusers"},"documentation":{"html":"<p>The kerberos_enumusers module is used to enumerate valid Domain Users\nvia Kerberos from a wholly unauthenticated perspective. It utilises the\ndifferent responses returned by the service to identify users that exist\nwithin the target domain. It is also able to identify whether user\naccounts are enabled or disabled/locked out.</p>\n<h2 id=\"target\" style=\"position:relative;\"><a href=\"#target\" aria-label=\"target permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Target</h2>\n<p>To use kerberos_enumusers, make sure you are able to connect to the\nKerberos service on a Domain Controller.</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<p>The following demonstrates basic usage, using a custom wordlist,\ntargeting a single Domain Controller to identify valid domain user\naccounts.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf &gt; use auxiliary/gather/kerberos_enumusers\nmsf auxiliary(kerberos_enumusers) &gt; set DOMAIN MYDOMAIN\nDOMAIN =&gt; MYDOMAIN\nmsf auxiliary(kerberos_enumusers) &gt; set RHOST 192.168.5.1\nRHOST =&gt; 192.168.5.1\nmsf auxiliary(kerberos_enumusers) &gt; set USER_FILE /job/users.txt\nUSER_FILE =&gt; /job/users.txt\nmsf auxiliary(kerberos_enumusers) &gt; run\n\n[*] Validating options...\n[*] Using domain: MYDOMAIN...\n[*] 192.168.5.1:88 - Testing User: &quot;bob&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_PREAUTH_REQUIRED - Additional\npre-authentication required\n[+] 192.168.5.1:88 - User: &quot;bob&quot; is present\n[*] 192.168.5.1:88 - Testing User: &quot;alice&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_PREAUTH_REQUIRED - Additional\npre-authentication required\n[+] 192.168.5.1:88 - User: &quot;alice&quot; is present\n[*] 192.168.5.1:88 - Testing User: &quot;matt&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_PREAUTH_REQUIRED - Additional\npre-authentication required\n[+] 192.168.5.1:88 - User: &quot;matt&quot; is present\n[*] 192.168.5.1:88 - Testing User: &quot;guest&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_CLIENT_REVOKED - Clients credentials have\nbeen revoked\n[-] 192.168.5.1:88 - User: &quot;guest&quot; account disabled or locked out\n[*] 192.168.5.1:88 - Testing User: &quot;admint&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_C_PRINCIPAL_UNKNOWN - Client not found in\nKerberos database\n[*] 192.168.5.1:88 - User: &quot;admint&quot; does not exist\n[*] 192.168.5.1:88 - Testing User: &quot;admin&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_C_PRINCIPAL_UNKNOWN - Client not found in\nKerberos database\n[*] 192.168.5.1:88 - User: &quot;admin&quot; does not exist\n[*] 192.168.5.1:88 - Testing User: &quot;administrator&quot;...\n[*] 192.168.5.1:88 - KDC_ERR_C_PRINCIPAL_UNKNOWN - Client not found in\nKerberos database\n[*] 192.168.5.1:88 - User: &quot;administrator&quot; does not exist\n[*] Auxiliary module execution completed\nmsf auxiliary(kerberos_enumusers) &gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"options\" style=\"position:relative;\"><a href=\"#options\" aria-label=\"options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Options</h2>\n<p>The kerberos<em>enumusers module only requires the RHOST, DOMAIN and\nUSER</em>FILE options to run.</p>\n<p><strong>The DOMAIN option</strong></p>\n<p>This option is used to specify the target domain. If the domain name is\nincorrect an error is returned and domain user account enumeration will fail.</p>\n<p>An example of setting DOMAIN:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">set DOMAIN [domain name]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>The USER_FILE option</strong></p>\n<p>This option is used to specify the file containing a list of user names\nto query the Domain Controller to identify if they exist in the target domain\nor not. One per line.</p>\n<p>An example of setting USER_FILE:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">set USER_FILE [path to file]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>The Timeout option</strong></p>\n<p>This option is used to specify the TCP timeout i.e. the time to wait\nbefore a connection to the Domain Controller is established and data read.</p>\n<p>An example of setting Timeout:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">set Timeout [value in seconds]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>"}}},"pageContext":{"id":"95aa5025-ddf6-5b98-94a4-06a1b676ac17"}}}